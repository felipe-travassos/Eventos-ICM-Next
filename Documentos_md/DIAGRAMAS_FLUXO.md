# Diagramas e Fluxogramas - Sistema de Eventos ICM

## ๐ Visรฃo Geral dos Fluxos

Este documento apresenta os principais fluxos e diagramas do Sistema de Eventos ICM para facilitar o entendimento das funcionalidades.

---

## ๐๏ธ Arquitetura do Sistema

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    SISTEMA DE EVENTOS ICM                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                             โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ     โ
โ  โ   Frontend  โ    โ   Backend   โ    โ  Pagamentos โ     โ
โ  โ  (Next.js)  โโโโโบโ (Firebase)  โโโโโบโ(MercadoPago)โ     โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ     โ
โ                                                             โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ     โ
โ  โAutenticaรงรฃo โ    โBanco Dados  โ    โArmazenamentoโ     โ
โ  โ(Firebase    โ    โ(Firestore)  โ    โ(Firebase    โ     โ
โ  โ    Auth)    โ    โ             โ    โ  Storage)   โ     โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฅ Hierarquia de Usuรกrios

```
                    โโโโโโโโโโโโโโโโโโโโโโโ
                    โ  Secretรกrio Regional โ
                    โ    (Acesso Total)    โ
                    โโโโโโโโโโโโฌโโโโโโโโโโโ
                               โ
                    โโโโโโโโโโโโผโโโโโโโโโโโ
                    โ       Pastor        โ
                    โ  (Gerencia Igreja)  โ
                    โโโโโโโโโโโโฌโโโโโโโโโโโ
                               โ
                    โโโโโโโโโโโโผโโโโโโโโโโโ
                    โ  Secretรกrio Local   โ
                    โ (Inscreve Membros)  โ
                    โโโโโโโโโโโโฌโโโโโโโโโโโ
                               โ
                    โโโโโโโโโโโโผโโโโโโโโโโโ
                    โ       Membro        โ
                    โ (Inscriรงรตes Prรณprias)โ
                    โโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Fluxo de Inscriรงรฃo Individual

```
โโโโโโโโโโโโโโโ
โ   INรCIO    โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ    NรO   โโโโโโโโโโโโโโโ
โ Usuรกrio     โโโโโโโโโโโโค Estรก        โ
โ Logado?     โ          โ Logado?     โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโโโโโโโโ
       โ SIM                    โ
       โผ                        โผ
โโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโ
โ Perfil      โ          โ Fazer       โ
โ Completo?   โ          โ Login       โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโโโโโโโโ
       โ SIM
       โผ
โโโโโโโโโโโโโโโ
โ Visualizar  โ
โ Eventos     โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Selecionar  โ
โ Evento      โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ    NรO   โโโโโโโโโโโโโโโ
โ Hรก Vagas    โโโโโโโโโโโโค Evento      โ
โ Disponรญveis?โ          โ Lotado      โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโโโโโโโโ
       โ SIM
       โผ
โโโโโโโโโโโโโโโ
โ Confirmar   โ
โ Inscriรงรฃo   โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ    GRATUITO  โโโโโโโโโโโโโโโ
โ Evento รฉ    โโโโโโโโโโโโโโโบโ Inscriรงรฃo   โ
โ Pago?       โ              โ Confirmada  โ
โโโโโโโโฌโโโโโโโ              โโโโโโโโโโโโโโโ
       โ PAGO
       โผ
โโโโโโโโโโโโโโโ
โ Gerar       โ
โ PIX         โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Realizar    โ
โ Pagamento   โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Pagamento   โ
โ Confirmado  โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Inscriรงรฃo   โ
โ Finalizada  โ
โโโโโโโโโโโโโโโ
```

---

## ๐ Fluxo de Inscriรงรฃo por Secretรกrio

```
โโโโโโโโโโโโโโโ
โ Secretรกrio  โ
โ Acessa      โ
โ Sistema     โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Selecionar  โ
โ Evento      โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโ
โ Buscar      โ   NรO   โ Cadastrar   โ
โ Pessoa      โโโโโโโโโโโค Nova        โ
โ Existente   โ         โ Pessoa      โ
โโโโโโโโฌโโโโโโโ         โโโโโโโโโโโโโโโ
       โ SIM
       โผ
โโโโโโโโโโโโโโโ
โ Selecionar  โ
โ da Lista    โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Confirmar   โ
โ Dados       โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Criar       โ
โ Inscriรงรฃo   โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Inscriรงรฃo   โ
โ Confirmada  โ
โ Automaticamente โ
โโโโโโโโโโโโโโโ
```

---

## ๐ซ Fluxo de Check-in

```
โโโโโโโโโโโโโโโ
โ Participanteโ
โ Chega ao    โ
โ Evento      โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโ
โ Apresenta   โ   OU    โ Informa     โ
โ QR Code     โโโโโโโโโโโค Nome/CPF    โ
โโโโโโโโฌโโโโโโโ         โโโโโโโโฌโโโโโโโ
       โ                       โ
       โผ                       โผ
โโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโ
โ Organizador โ         โ Organizador โ
โ Escaneia    โ         โ Busca       โ
โ QR Code     โ         โ Manualmente โ
โโโโโโโโฌโโโโโโโ         โโโโโโโโฌโโโโโโโ
       โ                       โ
       โโโโโโโโโฌโโโโโโโโโโโโโโโโ
               โผ
โโโโโโโโโโโโโโโ    NรO   โโโโโโโโโโโโโโโ
โ Inscriรงรฃo   โโโโโโโโโโโโค Pessoa nรฃo  โ
โ Encontrada? โ          โ Inscrita    โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโโโโโโโโ
       โ SIM
       โผ
โโโโโโโโโโโโโโโ    NรO   โโโโโโโโโโโโโโโ
โ Pagamento   โโโโโโโโโโโโค Pagamento   โ
โ Confirmado? โ          โ Pendente    โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโโโโโโโโ
       โ SIM
       โผ
โโโโโโโโโโโโโโโ
โ Registrar   โ
โ Presenรงa    โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Check-in    โ
โ Realizado   โ
โโโโโโโโโโโโโโโ
```

---

## ๐ฏ Fluxo de Criaรงรฃo de Evento

```
โโโโโโโโโโโโโโโ
โ Pastor/Adminโ
โ Acessa      โ
โ Painel      โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Clicar      โ
โ "Novo       โ
โ Evento"     โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Preencher   โ
โ Formulรกrio: โ
โ โข Tรญtulo    โ
โ โข Descriรงรฃo โ
โ โข Data/Hora โ
โ โข Local     โ
โ โข Preรงo     โ
โ โข Vagas     โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ    OPCIONAL  โโโโโโโโโโโโโโโ
โ Upload      โโโโโโโโโโโโโโโบโ Adicionar   โ
โ Imagem?     โ              โ Banner      โ
โโโโโโโโฌโโโโโโโ              โโโโโโโโโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Revisar     โ
โ Informaรงรตes โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Criar       โ
โ Evento      โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Evento      โ
โ Publicado   โ
โ e Ativo     โ
โโโโโโโโโโโโโโโ
```

---

## ๐ณ Fluxo de Pagamento PIX

```
โโโโโโโโโโโโโโโ
โ Usuรกrio     โ
โ Confirma    โ
โ Inscriรงรฃo   โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Sistema     โ
โ Gera PIX    โ
โ via         โ
โ MercadoPago โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Exibe       โ
โ QR Code     โ
โ e Cรณdigo    โ
โ Copia/Cola  โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโ
โ Usuรกrio     โ   OU    โ Usuรกrio     โ
โ Escaneia    โโโโโโโโโโโค Copia       โ
โ QR Code     โ         โ Cรณdigo      โ
โโโโโโโโฌโโโโโโโ         โโโโโโโโฌโโโโโโโ
       โ                       โ
       โโโโโโโโโฌโโโโโโโโโโโโโโโโ
               โผ
โโโโโโโโโโโโโโโ
โ Realiza     โ
โ Pagamento   โ
โ no Banco    โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ MercadoPago โ
โ Confirma    โ
โ Pagamento   โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Webhook     โ
โ Notifica    โ
โ Sistema     โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Status      โ
โ Atualizado  โ
โ para "Pago" โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ Usuรกrio     โ
โ Recebe      โ
โ Confirmaรงรฃo โ
โโโโโโโโโโโโโโโ
```

---

## ๐ Fluxo de Autenticaรงรฃo

```
โโโโโโโโโโโโโโโ
โ Usuรกrio     โ
โ Acessa      โ
โ Sistema     โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ    NรO   โโโโโโโโโโโโโโโ
โ Possui      โโโโโโโโโโโโค Criar       โ
โ Conta?      โ          โ Nova Conta  โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโฌโโโโโโโ
       โ SIM                    โ
       โผ                        โผ
โโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโ
โ Fazer       โ          โ Preencher   โ
โ Login       โ          โ Formulรกrio  โ
โโโโโโโโฌโโโโโโโ          โ Registro    โ
       โ                 โโโโโโโโฌโโโโโโโ
       โผ                        โ
โโโโโโโโโโโโโโโ                 โผ
โ Inserir     โ          โโโโโโโโโโโโโโโ
โ Email e     โ          โ Criar       โ
โ Senha       โ          โ Conta       โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโฌโโโโโโโ
       โ                        โ
       โผ                        โผ
โโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโ
โ Firebase    โ          โ Enviar      โ
โ Valida      โ          โ Email       โ
โ Credenciais โ          โ Verificaรงรฃo โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโฌโโโโโโโ
       โ                        โ
       โผ                        โผ
โโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโ
โ Login       โ          โ Verificar   โ
โ Realizado   โ          โ Email       โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโฌโโโโโโโ
       โ                        โ
       โโโโโโโโโฌโโโโโโโโโโโโโโโโโ
               โผ
โโโโโโโโโโโโโโโ
โ Usuรกrio     โ
โ Autenticado โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ    NรO   โโโโโโโโโโโโโโโ
โ Perfil      โโโโโโโโโโโโค Completar   โ
โ Completo?   โ          โ Perfil      โ
โโโโโโโโฌโโโโโโโ          โโโโโโโโโโโโโโโ
       โ SIM
       โผ
โโโโโโโโโโโโโโโ
โ Acesso      โ
โ Liberado    โ
โโโโโโโโโโโโโโโ
```

---

## ๐ Estrutura de Dados

### Usuรกrio (User)
```
User {
  id: string
  uid: string (Firebase Auth)
  name: string
  email: string
  phone: string
  cpf: string
  role: 'membro' | 'secretario_local' | 'pastor' | 'secretario_regional'
  churchId: string
  churchName: string
  createdAt: Date
  updatedAt: Date
}
```

### Evento (Event)
```
Event {
  id: string
  title: string
  description: string
  date: Date
  endDate?: Date
  location: string
  price: number
  maxParticipants: number
  currentParticipants: number
  status: 'active' | 'canceled' | 'completed' | 'ended'
  churchId: string
  churchName: string
  imageURL?: string
  createdBy: string
  createdAt: Date
  updatedAt: Date
}
```

### Inscriรงรฃo (EventRegistration)
```
EventRegistration {
  id: string
  eventId: string
  userId: string
  userType: 'user' | 'senior'
  seniorId?: string
  userName: string
  userEmail: string
  userPhone: string
  userCpf: string
  userChurch: string
  churchName: string
  pastorName: string
  status: 'pending' | 'approved' | 'rejected' | 'confirmed' | 'cancelled'
  paymentStatus: 'pending' | 'paid' | 'refunded'
  paymentId: string
  registeredBy: string
  registeredByName: string
  registrationType: 'self' | 'secretary'
  checkedIn?: boolean
  checkedInAt?: Date
  checkedInBy?: string
  createdAt: Date
  updatedAt: Date
}
```

### Igreja (Church)
```
Church {
  id: string
  name: string
  address: string
  region: string
  pastorId: string | null
  pastorName: string | null
  createdAt: Date
  updatedAt?: Date
}
```

---

## ๐ฏ Estados dos Componentes

### Estados de Inscriรงรฃo
```
โโโโโโโโโโโโโโโ    Pagamento    โโโโโโโโโโโโโโโ
โ   PENDING   โโโโโโโโโโโโโโโโโโโบโ    PAID     โ
โ (Pendente)  โ                 โ   (Pago)    โ
โโโโโโโโฌโโโโโโโ                 โโโโโโโโโโโโโโโ
       โ
       โ Cancelamento
       โผ
โโโโโโโโโโโโโโโ
โ  CANCELLED  โ
โ (Cancelado) โ
โโโโโโโโโโโโโโโ
```

### Estados de Evento
```
โโโโโโโโโโโโโโโ    Inรญcio    โโโโโโโโโโโโโโโ    Fim    โโโโโโโโโโโโโโโ
โ   ACTIVE    โโโโโโโโโโโโโโโบโ  COMPLETED  โโโโโโโโโโโโบโ    ENDED    โ
โ   (Ativo)   โ              โ (Realizado) โ           โ (Finalizado)โ
โโโโโโโโฌโโโโโโโ              โโโโโโโโโโโโโโโ           โโโโโโโโโโโโโโโ
       โ
       โ Cancelamento
       โผ
โโโโโโโโโโโโโโโ
โ  CANCELLED  โ
โ (Cancelado) โ
โโโโโโโโโโโโโโโ
```

---

## ๐ Ciclo de Vida de um Evento

```
1. CRIAรรO
   โโโ Pastor/Admin cria evento
   โโโ Define parรขmetros (data, preรงo, vagas)
   โโโ Status: ACTIVE

2. INSCRIรรES
   โโโ Usuรกrios se inscrevem
   โโโ Pagamentos sรฃo processados
   โโโ Vagas sรฃo preenchidas

3. REALIZAรรO
   โโโ Check-in dos participantes
   โโโ Evento acontece
   โโโ Status: COMPLETED

4. FINALIZAรรO
   โโโ Relatรณrios sรฃo gerados
   โโโ Dados sรฃo arquivados
   โโโ Status: ENDED
```

---

## ๐ฑ Responsividade e Dispositivos

### Desktop (> 1024px)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [Logo]              [Menu Principal]        [Usuรกrio]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                         โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ
โ  โ   Evento 1  โ  โ   Evento 2  โ  โ   Evento 3  โ     โ
โ  โ             โ  โ             โ  โ             โ     โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ
โ                                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Tablet (768px - 1024px)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [Logo]        [Menu]        [Usuรกrio]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                         โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ       โ
โ  โ   Evento 1  โ  โ   Evento 2  โ       โ
โ  โ             โ  โ             โ       โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ       โ
โ                                         โ
โ  โโโโโโโโโโโโโโโ                        โ
โ  โ   Evento 3  โ                        โ
โ  โ             โ                        โ
โ  โโโโโโโโโโโโโโโ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Mobile (< 768px)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [โฐ]  [Logo]      [Usuรกrio]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ       Evento 1          โ โ
โ  โ                         โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ       Evento 2          โ โ
โ  โ                         โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

*Diagramas desenvolvidos para o Sistema de Eventos ICM*
*Versรฃo 1.0 - Janeiro 2024*